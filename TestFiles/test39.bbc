using System;
using System.Memory;

void PrintHeader(int ptr) {
	int value = (*ptr) as int;
	if (value >= 127) {
		value -= 127;
        
        Print("Header at ");
        Print(ptr);
        Print(": ");
        Print("size = ");
        Print(value);
        PrintLine(", allocated = true");
	} else {
        Print("Header at ");
        Print(ptr);
        Print(": ");
        Print("size = ");
        Print(value);
        PrintLine(", allocated = false");
	};
}

*0 = 16;

int ptr1 = Allocate(1);
*ptr1 = 55;

int ptr2 = Allocate(1);
*ptr2 = 33;

PrintLine(ptr1);
PrintLine(ptr2);

PrintLine(*ptr1 as int);
PrintLine(*ptr2 as int);

Dealloc(ptr1);

ptr1 = Allocate(1);
*ptr1 = 35;

PrintLine(ptr1);
PrintLine(ptr2);

PrintLine(*ptr1 as int);
PrintLine(*ptr2 as int);
